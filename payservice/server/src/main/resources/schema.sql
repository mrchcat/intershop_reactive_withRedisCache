DROP TABLE IF EXISTS accounts;
DROP TABLE IF EXISTS clients;
DROP TABLE IF EXISTS currencies;

CREATE TABLE IF NOT EXISTS currencies (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  currency VARCHAR(10) UNIQUE NOT NULL
);

CREATE TABLE IF NOT EXISTS clients (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  client_uuid UUID UNIQUE NOT NULL,
  name varchar(256) NOT NULL
);

CREATE TABLE IF NOT EXISTS accounts (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  account BIGINT UNIQUE NOT NULL,
  client_id BIGINT NOT NULL REFERENCES clients(id),
  balance NUMERIC(14,2) NOT NULL CHECK(balance>=0),
  currency_id BIGINT NOT NULL REFERENCES currencies(id)
);